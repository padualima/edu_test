<% if @portfolios.count.positive? %>
  <%= turbo_frame_tag :filter_field do %>
    <%= render partial: "form_filter" %>
    <div class="row mb-3">
      <div class="col-12">
        <div class="d-flex justify-content-end">
          <%= link_to 'Nova Importação', upload_data_portfolios_path, class: "btn btn-outline-primary btn-sm" %>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="card shadow-sm mb-5 bg-body rounder border-0">
          <div class="card-body">
            <div class="row text-center pt-3">
              <h5>Rank de Despesas Públicas dos Parlamentares</h5>
            </div>
            <div class="row text-center">
              <% if @result_year_group && @result_state_group %>
                <p class="text-muted">
                  Despesas Públicas do Estado <b><%= @result_state_group.slug %></b>
                  referente ao Ano de <b><%= @result_year_group.slug %></b>.</p>
              <% end %>
            </div>
            <hr>
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Deputado(a)</th>
                  <th scope="col">Despesas Públicas</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody class="table-group-divider">
                <% @portfolios.each_with_index do |portfolio, i| %>
                  <tr>
                    <th scope="row"><%= "#{i.next}º" %></th>
                    <td><%= portfolio.member.name %></td>
                    <td><%= portfolio.expenses_amount.format %></td>
                    <td>
                      <%= link_to('Visualizar Portfolio', portfolio_path(portfolio),
                        class: "btn btn-outline-dark btn-sm") %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% else %>
  <div class="row pt-3 d-flex justify-content-center">
    <div class="col-lg-6 col-md-8 col-sm-8">
      <div class="card shadow-sm mb-5 bg-body rounder border-0">
        <div class="card-body d-flex flex-column">
          <%= turbo_frame_tag "upload_data" do %>
            <div class="text-center">
              <h4> Clique para importar seu arquivo(.csv)!</h4>
              <br>
              <%= link_to(
                'Selecionar Arquivo',
                upload_data_portfolios_path,
                class: "btn btn-outline-primary btn-sm"
              ) %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>
