<% if @portfolios.count.positive? %>
  <%= turbo_frame_tag :filter_field do %>
    <%= render partial: "import_button" %>
    <%= render partial: "form_filter" %>

    <div class="card shadow-sm bg-body rounded-4 border-0 px-0 mb-2">
      <div class="card-body">
        <h5 class="text-center">Rank de Despesas Públicas dos Parlamentares</h5>
        <% group = @portfolios.first.node_group %>
        <p class="text-sencodary text-center"> Despesas Públicas do Estado <b><%= group.slug %></b>
          referente ao Ano de <b><%= group.parent.slug %></b>.</p>

        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Deputado(a)</th>
                <th scope="col">Despesas Públicas</th>
                <th scope="col">Ações</th>
              </tr>
            </thead>
            <tbody>
              <% @portfolios.each_with_index do |portfolio, i| %>
                <tr>
                  <th scope="row"><%= "#{i.next}º" %></th>
                  <td><%= portfolio.member.name %></td>
                  <td><%= portfolio.expenses_amount.format %></td>
                  <td>
                    <%= link_to('Visualizar Portfolio', portfolio_path(portfolio),
                      class: "btn btn-outline-dark btn-sm border-0 shadow-sm rounded-3") %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  <% end %>
<% else %>
  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-11">
      <div class="card shadow-sm bg-body rounded-4 border-0 mt-5">
        <div class="card-body">
          <%= turbo_frame_tag :upload_data do %>
            <div class="text-center">
              <h4 class="m-4"> Importe um arquivo(.csv)!</h4>
              <%= link_to(
                'Selecionar Arquivo',
                upload_data_portfolios_path,
                class: "btn btn-outline-dark btn-sm m-4 shadow-sm border-0 rounded-3"
              ) %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>
